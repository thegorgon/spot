module Geo  
  def self.defaults
    @defaults ||= {}
  end
  
  def self.default_units
    if [:kms, :miles].include?(defaults[:units])
      self.defaults[:units] 
    else
      :miles
    end
  end
  
  def self.default_formula
    if [:flat, :sphere].include?(defaults[:formula])
      self.defaults[:formula] 
    else
      :sphere
    end
  end
  
  def self.all_abbreviations
    @abbreviations ||= Geo::STATES.merge(Geo::ABBREVIATIONS).merge(Geo::ORDINALS).merge(Geo::CARDINAL_DIRECTIONS)
  end
  
  # =============
  # = Constants =
  # =============

  PI_DIV_RAD = 0.0174
  KMS_PER_MILE = 1.609
  EARTH_RADIUS_IN_MILES = 3963.19
  EARTH_RADIUS_IN_KMS = EARTH_RADIUS_IN_MILES * KMS_PER_MILE
  MILES_PER_LATITUDE_DEGREE = 69.1
  KMS_PER_LATITUDE_DEGREE = MILES_PER_LATITUDE_DEGREE * KMS_PER_MILE
  LATITUDE_DEGREES = EARTH_RADIUS_IN_MILES / MILES_PER_LATITUDE_DEGREE  

  EXTRANEOUS_WORDS = [
    "and",
    "inc",
    "corp",
    "co",
    "llc",
    "dds",
    "esq",
    "md",
    "dr",
    "st",
    "of",
    "the",
    "an",
    "le",
    "la",
    "les",
    "el",
    "los",
    "las",
    "un",
    "una",
    "uno",
    "unos",
    "une",
    "et",
    "y",
    "bar",
    "grill",
    "restaurant",
    "company",
    "store",
    "shop",
    "cafe",
    "salon",
    "gelateria"
  ]
    
  CARDINAL_DIRECTIONS = {
    'w'   => 'west',
    'wst' => 'west',
    'n'   => 'north',
    'nth' => 'north',
    's'   => 'south',
    'sth' => 'south',
    'e'   => 'east',
    'nw'  => 'northwest',
    'ne'  => 'northeast',
    'sw'  => 'southwest',
    'se'  => 'southeast'
  }
  
  STATES = {
    "al"=>"alabama",
    "ak"=>"alaska",
    "as"=>"american samoa",
    "az"=>"arizona",
    "ar"=>"arkansas",
    "ca"=>"california",
    "co"=>"colorado",
    "ct"=>"connecticut",
    "de"=>"delaware",
    "dc"=>"district of columbia",
    "fm"=>"federated states of micronesia",
    "fl"=>"florida",
    "ga"=>"georgia",
    "gu"=>"guam",
    "hi"=>"hawaii",
    "id"=>"idaho",
    "il"=>"illinois",
    "in"=>"indiana",
    "ia"=>"iowa",
    "ks"=>"kansas",
    "ky"=>"kentucky",
    "la"=>"louisiana",
    "me"=>"maine",
    "mh"=>"marshall islands",
    "md"=>"maryland",
    "ma"=>"massachusetts",
    "mi"=>"michigan",
    "mn"=>"minnesota",
    "ms"=>"mississippi",
    "mo"=>"missouri",
    "mt"=>"montana",
    "ne"=>"nebraska",
    "nv"=>"nevada",
    "nh"=>"new hampshire",
    "nj"=>"new jersey",
    "nm"=>"new mexico",
    "ny"=>"new york",
    "nc"=>"north carolina",
    "nd"=>"north dakota",
    "mp"=>"northern mariana islands",
    "oh"=>"ohio",
    "ok"=>"oklahoma",
    "or"=>"oregon",
    "pw"=>"palau",
    "pa"=>"pennsylvania",
    "pr"=>"puerto rico",
    "ri"=>"rhode island",
    "sc"=>"south carolina",
    "sd"=>"south dakota",
    "tn"=>"tennessee",
    "tx"=>"texas",
    "ut"=>"utah",
    "vt"=>"vermont",
    "vi"=>"virgin islands",
    "va"=>"virginia",
    "wa"=>"washington",
    "wv"=>"west virginia",
    "wi"=>"wisconsin",
    "wy"=>"wyoming",
    
  }
    
  ORDINALS = {
    'first'       => '1st',
    'second'      => '2nd',
    'third'       => '3rd',
    'fourth'      => '4th',
    'fifth'       => '5th',
    'sixth'       => '6th',
    'seventh'     => '7th',
    'eighth'      => '8th',
    'ninth'       => '9th',
    'tenth'       => '10th',
    'eleventh'    => '11th',
    'twelfth'     => '12th',
    'thirteenth'  => '13th',
    'fourteenth'  => '14th',
    'fifteenth'   => '15th',
    'sixteenth'   => '16th',
    'seventeenth' => '17th',
    'eighteenth'  => '18th',
    'nineteenth'  => '19th',
    'twentieth'   => '20th',
    'thirtieth'   => '30th',
    'fortieth'    => '40th',
    'fiftieth'    => '50th',
    'sixtieth'    => '60th',
    'seventieth'  => '70th',
    'eightieth'   => '80th',
    'ninetieth'   => '90th'
  }
  
  ABBREVIATIONS = {
    '&'     => 'and',
    'ste'   => '#',
    'suite' => '#',
    'allee' => 'alley',
    'ally' => 'alley',
    'aly' => 'alley',
    'anex' => 'annex',
    'annx' => 'annex',
    'anx' => 'annex',
    'arc' => 'arcade',
    'av' => 'avenue',
    'ave' => 'avenue',
    'aven' => 'avenue',
    'avenu' => 'avenue',
    'avn' => 'avenue',
    'avnue' => 'avenue',
    'bayou' => 'bayoo',
    'bch' => 'beach',
    'bg' => 'burg',
    'bgs' => 'burgs',
    'blf' => 'bluff',
    'blfs' => 'bluffs',
    'bluf' => 'bluff',
    'blvd' => 'boulevard',
    'bnd' => 'bend',
    'bot' => 'bottom',
    'bottm' => 'bottom',
    'boul' => 'boulevard',
    'boulv' => 'boulevard',
    'br' => 'branch',
    'brdge' => 'bridge',
    'brg' => 'bridge',
    'brk' => 'brook',
    'brks' => 'brooks',
    'brnch' => 'branch',
    'btm' => 'bottom',
    'byp' => 'bypass',
    'bypa' => 'bypass',
    'bypas' => 'bypass',
    'byps' => 'bypass',
    'byu' => 'bayoo',
    'canyn' => 'canyon',
    'causway' => 'causeway',
    'cen' => 'center',
    'cent' => 'center',
    'centr' => 'center',
    'centre' => 'center',
    'cir' => 'circle',
    'circ' => 'circle',
    'circl' => 'circle',
    'cirs' => 'circles',
    'ck' => 'creek',
    'clb' => 'club',
    'clf' => 'cliff',
    'clfs' => 'cliffs',
    'cmn' => 'common',
    'cmp' => 'camp',
    'cnter' => 'center',
    'cntr' => 'center',
    'cnyn' => 'canyon',
    'cor' => 'corner',
    'cors' => 'corners',
    'cp' => 'camp',
    'cpe' => 'cape',
    'cr' => 'creek',
    'crcl' => 'circle',
    'crcle' => 'circle',
    'crecent' => 'crescent',
    'cres' => 'crescent',
    'cresent' => 'crescent',
    'crk' => 'creek',
    'crscnt' => 'crescent',
    'crse' => 'course',
    'crsent' => 'crescent',
    'crsnt' => 'crescent',
    'crssing' => 'crossing',
    'crssng' => 'crossing',
    'crst' => 'crest',
    'crt' => 'court',
    'cswy' => 'causeway',
    'ct' => 'courts',
    'ctr' => 'center',
    'ctrs' => 'centers',
    'cts' => 'courts',
    'curv' => 'curve',
    'cv' => 'cove',
    'cvs' => 'coves',
    'cyn' => 'canyon',
    'div' => 'divide',
    'dl' => 'dale',
    'dm' => 'dam',
    'dr' => 'drive',
    'driv' => 'drive',
    'drs' => 'drives',
    'drv' => 'drive',
    'dv' => 'divide',
    'dvd' => 'divide',
    'est' => 'estate',
    'ests' => 'estates',
    'exp' => 'expressway',
    'expr' => 'expressway',
    'express' => 'expressway',
    'expw' => 'expressway',
    'expy' => 'expressway',
    'ext' => 'extension',
    'extn' => 'extension',
    'extnsn' => 'extension',
    'exts' => 'extensions',
    'fld' => 'field',
    'flds' => 'fields',
    'fls' => 'falls',
    'flt' => 'flat',
    'flts' => 'flats',
    'forests' => 'forest',
    'forg' => 'forge',
    'frd' => 'ford',
    'frds' => 'fords',
    'freewy' => 'freeway',
    'frg' => 'forge',
    'frgs' => 'forges',
    'frk' => 'fork',
    'frks' => 'forks',
    'frry' => 'ferry',
    'frst' => 'forest',
    'frt' => 'fort',
    'frway' => 'freeway',
    'frwy' => 'freeway',
    'fry' => 'ferry',
    'ft' => 'fort',
    'fwy' => 'freeway',
    'gardn' => 'garden',
    'gatewy' => 'gateway',
    'gatway' => 'gateway',
    'gdn' => 'garden',
    'gdns' => 'gardens',
    'gln' => 'glen',
    'glns' => 'glens',
    'grden' => 'garden',
    'grdn' => 'garden',
    'grdns' => 'gardens',
    'grn' => 'green',
    'grns' => 'greens',
    'grov' => 'grove',
    'grv' => 'grove',
    'grvs' => 'groves',
    'gtway' => 'gateway',
    'gtwy' => 'gateway',
    'harb' => 'harbor',
    'harbr' => 'harbor',
    'havn' => 'haven',
    'hbr' => 'harbor',
    'hbrs' => 'harbors',
    'height' => 'heights',
    'hgts' => 'heights',
    'highwy' => 'highway',
    'hiway' => 'highway',
    'hiwy' => 'highway',
    'hl' => 'hill',
    'hllw' => 'hollow',
    'hls' => 'hills',
    'hollows' => 'hollow',
    'holw' => 'hollow',
    'holws' => 'hollow',
    'hrbor' => 'harbor',
    'ht' => 'heights',
    'hts' => 'heights',
    'hvn' => 'haven',
    'hway' => 'highway',
    'hwy' => 'highway',
    'inlt' => 'inlet',
    'is' => 'island',
    'isles' => 'isle',
    'islnd' => 'island',
    'islnds' => 'islands',
    'iss' => 'islands',
    'jct' => 'junction',
    'jction' => 'junction',
    'jctn' => 'junction',
    'jctns' => 'junctions',
    'jcts' => 'junctions',
    'junctn' => 'junction',
    'juncton' => 'junction',
    'knl' => 'knoll',
    'knls' => 'knolls',
    'knol' => 'knoll',
    'ky' => 'key',
    'kys' => 'keys',
    'la' => 'lane',
    'lanes' => 'lane',
    'lck' => 'lock',
    'lcks' => 'locks',
    'ldg' => 'lodge',
    'ldge' => 'lodge',
    'lf' => 'loaf',
    'lgt' => 'light',
    'lgts' => 'lights',
    'lk' => 'lake',
    'lks' => 'lakes',
    'ln' => 'lane',
    'lndg' => 'landing',
    'lndng' => 'landing',
    'lodg' => 'lodge',
    'loops' => 'loop',
    'mdw' => 'meadow',
    'mdws' => 'meadows',
    'medows' => 'meadows',
    'missn' => 'mission',
    'ml' => 'mill',
    'mls' => 'mills',
    'mnr' => 'manor',
    'mnrs' => 'manors',
    'mnt' => 'mount',
    'mntain' => 'mountain',
    'mntn' => 'mountain',
    'mntns' => 'mountains',
    'mountin' => 'mountain',
    'msn' => 'mission',
    'mssn' => 'mission',
    'mt' => 'mount',
    'mtin' => 'mountain',
    'mtn' => 'mountain',
    'mtns' => 'mountains',
    'mtwy' => 'motorway',
    'nck' => 'neck',
    'opas' => 'overpass',
    'orch' => 'orchard',
    'orchrd' => 'orchard',
    'ovl' => 'oval',
    'park' => 'parks',
    'parkwy' => 'parkway',
    'paths' => 'path',
    'pikes' => 'pike',
    'pk' => 'park',
    'pkway' => 'parkway',
    'pkwy' => 'parkways',
    'pkwys' => 'parkways',
    'pky' => 'parkway',
    'pl' => 'place',
    'plaines' => 'plains',
    'pln' => 'plain',
    'plns' => 'plains',
    'plz' => 'plaza',
    'plza' => 'plaza',
    'pne' => 'pine',
    'pnes' => 'pines',
    'pr' => 'prairie',
    'prarie' => 'prairie',
    'prk' => 'park',
    'prr' => 'prairie',
    'prt' => 'port',
    'prts' => 'ports',
    'psge' => 'passage',
    'pt' => 'point',
    'pts' => 'points',
    'rad' => 'radial',
    'radiel' => 'radial',
    'radl' => 'radial',
    'ranches' => 'ranch',
    'rd' => 'road',
    'rdg' => 'ridge',
    'rdge' => 'ridge',
    'rdgs' => 'ridges',
    'rds' => 'roads',
    'riv' => 'river',
    'rivr' => 'river',
    'rnch' => 'ranch',
    'rnchs' => 'ranch',
    'rpd' => 'rapid',
    'rpds' => 'rapids',
    'rst' => 'rest',
    'rte' => 'route',
    'rvr' => 'river',
    'shl' => 'shoal',
    'shls' => 'shoals',
    'shoar' => 'shore',
    'shoars' => 'shores',
    'shr' => 'shore',
    'shrs' => 'shores',
    'skwy' => 'skyway',
    'smt' => 'summit',
    'spg' => 'spring',
    'spgs' => 'springs',
    'spng' => 'spring',
    'spngs' => 'springs',
    'sprng' => 'spring',
    'sprngs' => 'springs',
    'spur' => 'spurs',
    'sq' => 'square',
    'sqr' => 'square',
    'sqre' => 'square',
    'sqrs' => 'squares',
    'sqs' => 'squares',
    'squ' => 'square',
    'st' => 'street',
    'sta' => 'station',
    'statn' => 'station',
    'stn' => 'station',
    'str' => 'street',
    'stra' => 'stravenue',
    'strav' => 'stravenue',
    'strave' => 'stravenue',
    'straven' => 'stravenue',
    'stravn' => 'stravenue',
    'streme' => 'stream',
    'strm' => 'stream',
    'strt' => 'street',
    'strvn' => 'stravenue',
    'strvnue' => 'stravenue',
    'sts' => 'streets',
    'sumit' => 'summit',
    'sumitt' => 'summit',
    'ter' => 'terrace',
    'terr' => 'terrace',
    'tpk' => 'turnpike',
    'tpke' => 'turnpike',
    'tr' => 'trail',
    'traces' => 'trace',
    'tracks' => 'track',
    'trails' => 'trail',
    'trak' => 'track',
    'trce' => 'trace',
    'trfy' => 'trafficway',
    'trk' => 'track',
    'trks' => 'track',
    'trl' => 'trail',
    'trls' => 'trail',
    'trnpk' => 'turnpike',
    'trpk' => 'turnpike',
    'trwy' => 'throughway',
    'tunel' => 'tunnel',
    'tunl' => 'tunnel',
    'tunls' => 'tunnel',
    'tunnels' => 'tunnel',
    'tunnl' => 'tunnel',
    'turnpk' => 'turnpike',
    'un' => 'union',
    'uns' => 'unions',
    'upas' => 'underpass',
    'vally' => 'valley',
    'vdct' => 'viaduct',
    'via' => 'viaduct',
    'viadct' => 'viaduct',
    'vill' => 'village',
    'villag' => 'village',
    'villg' => 'village',
    'villiage' => 'village',
    'vis' => 'vista',
    'vist' => 'vista',
    'vl' => 'ville',
    'vlg' => 'village',
    'vlgs' => 'villages',
    'vlly' => 'valley',
    'vly' => 'valley',
    'vlys' => 'valleys',
    'vst' => 'vista',
    'vsta' => 'vista',
    'vw' => 'view',
    'vws' => 'views',
    'walk' => 'walks',
    'wl' => 'well',
    'wls' => 'wells',
    'wy' => 'way',
    'xing' => 'crossing',
    'xrd' => 'crossroad'
  }
end